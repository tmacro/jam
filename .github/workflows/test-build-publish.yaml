name: Test build and publish python release
on:
  push:
    tags-ignore:
      # - '*.*.*a*'
      - '*.*.*b*'
      - '*.*.*rc*'
  workflow_dispatch: {}

jobs:
  tests:
    uses: ./.github/workflows/run-tests.yaml

  build:
    uses: ./.github/workflows/build.yaml
    needs: tests

  publish:
    uses: ./.github/workflows/build.yaml
    needs: build
